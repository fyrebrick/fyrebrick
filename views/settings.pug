extends layout
block styles
    link(rel="stylesheet", href="/css/settings.css")
block content
        .row
            .col-lg-12
                .card
                    .card-body
                        .row.justify-content-center.extra-bottom
                            .settings-card
                                ul#list-settings.list-group
                                    li.list-group-item
                                        .banner
                                            img.data-status(src="/images/bricklink-logo.png", alt="BL logo")
                                            span.status-name Bricklink API keys
                                        .settings#bricklinkApi
                                                .form-group
                                                    label(for='userName') User name
                                                    input#userName.form-control(name="userName" type='text' aria-describedby='userNameHelp' placeholder='Enter user name', value=(user)?user.userName:"", required='')
                                                    small#userNameHelp.form-text.text-muted Your bricklink user name (not store name)
                                                .form-group
                                                    label(for='consumerKey') Consumer key
                                                    input#consumerKey.api-input.form-control(name="consumerKey" type='text' aria-describedby='consumerKeyHelp' placeholder='Enter consumer key', value=(user)?user.CONSUMER_KEY:"", required='')
                                                    small#consumerKeyHelp.form-text.text-muted The consumer key publicly identifies your API account
                                                .form-group
                                                    label(for='consumerSecret') Consumer secret
                                                    input#consumerSecret.api-input.form-control(name="consumerSecret", type='text' aria-describedby='consumerSecretHelp' placeholder='Enter consumer secret',value=(user)?user.CONSUMER_SECRET:"", required='')
                                                    small#consumerSecretHelp.form-text.text-muted The consumer secret is your confidential API password
                                                .form-group
                                                    label(for='tokenValue') Token Value
                                                    input#tokenValue.api-input.form-control(name="tokenValue", type='text' aria-describedby='tokenKeyHelp' placeholder='Enter Token Value', value=(user)?user.TOKEN_VALUE:"", required='')
                                                    small#tokenValueHelp.form-text.text-muted The token key value for our ip address.
                                                .form-group
                                                    label(for='tokenSecret') Token secret
                                                    input#tokenSecret.api-input.form-control(name="tokenSecret", type='text' aria-describedby='consumerSecretHelp' placeholder='Enter consumer secret', value=(user )?user.TOKEN_SECRET:"", required='' )
                                                    small#tokenSecretHelp.form-text.text-muted The token key secret for our ip address.
                                                input#apiButton.btn.btn-primary.btn-lg(type='submit' role='button', value="Update")
                                    li.list-group-item
                                        .banner
                                            i.fas.fa-warehouse.data-status
                                            span.status-name Orders and inventory updater
                                        .settings
                                            .form-group
                                                i.fas.fa-bullseye
                                                label(for='inventoryInterval').pl-2 Update intory interval
                                                input#inventoryInterval.form-control-range(value=user.update_interval step="1", min="1", max="120", type='range' oninput="$('#rangeval').html('Every '+$(this).val()+' minutes ( '+(Math.round((24*60)/$(this).val()))+' calls everyday )')")
                                                span#rangeval="Every "+user.update_interval+" minutes ( "+(Math.round((24*60)/user.update_interval))+" calls everyday )"
                                                small#inventoryIntervalHelp.form-text.text-muted This will updater your orders and inventory items in the specified time interval
                                            .form-group
                                                button#update-inventory.update-btn.inventory.btn.btn-outline-info(type='button')
                                                    i.pl-1.fas.fa-sync-alt
                                                    span.pl-1 Update all inventory items
                                                    
                                            .form-group
                                                button#update-orders.update-btn.orders.btn.btn-outline-info(type='button')
                                                    i.pl-1.fas.fa-sync-alt
                                                    span.pl-1 Update all orders
                                                small#tokenSecretHelp.form-text.text-muted This will update every single order from your bricklink account
                                    li.list-group-item#ordersUpdater
                                        .banner
                                            i.fas.fa-file-contract.data-status
                                            span.status-name Notifications
                                        .settings
                                            if user.isBricklinkCallback
                                                .form-check
                                                    input#callbackCheckbox.form-check-input(type='checkbox' value='', checked='')
                                                    label.form-check-label(for='callbackCheckbox')
                                                        span Use push notifications (callback) (currently not working)
                                                .form-group#callBackUrl
                                                    label(for='callbackUrl') Callback URL
                                                    input#callbackUrl.api-input.form-control(name="callbackUrl", type='text' aria-describedby='callbackUrlHelp' value='https://my.fyrebrick.be/callback/'+user.userName, readonly='')
                                                    small#callbackUrlHelp.form-text.text-muted This callback URL should be added in your Bricklink register consumer page
                                            else
                                                .form-check
                                                    input#callbackCheckbox.form-check-input(type='checkbox' value='')
                                                    label.form-check-label(for='callbackCheckbox')
                                                        span Use push notifications (callback)
                                                .form-group#callBackUrl.hideMe
                                                    label(for='callbackUrl') Callback URL
                                                    input#callbackUrl.api-input.form-control(name="callbackUrl", type='text' aria-describedby='callbackUrlHelp' value='https://my.fyrebrick.be/callback/'+user.userName, readonly='')
                                                    small#callbackUrlHelp.form-text.text-muted This callback URL should be added in your Bricklink register consumer page
                                    li.list-group-item
                                        .banner
                                            i.fas.fa-user.data-status
                                            span.status-name My Fyrebrick account
                                        .settings
                                            .form-group
                                                i.fas.fa-exchange-alt
                                                span.pl-2 Bricklink API call amount:
                                                ul.list-group.list-group-flush
                                                    li.list-group-item
                                                        span.pl-1 daily:
                                                        span.pl-1=user.API_call_amount.daily.toLocaleString()+" times"
                                                        mall.form-text.text-muted The limit is 5.000 calls a day
                                                    li.list-group-item
                                                        span.pl-1 total:
                                                        span.pl-1=user.API_call_amount.total.toLocaleString()+" times"
                                                        mall.form-text.text-muted Total times called Bricklink API
                                            .form-group
                                                i.fas.fa-cogs
                                                span.pl-2 Manage your account
                                                ul.list-group.list-group-flush
                                                    li.link-banner.red.list-group-item
                                                        i.pl-1.fas.fa-trash-alt
                                                        span.pl-1 remove your account
                                                    li.link-banner.yellow.list-group-item
                                                        i.pl-1.fas.fa-file-download
                                                        span.pl-1 download your data
block modals

block scripts
    script(src="/js/settings.js")
